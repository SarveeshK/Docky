{"ast":null,"code":"var _jsxFileName = \"/home/sarveesh-kaarthic-ramesh-kannan/Docky/frontend/src/pages/SetDeadline.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getToken } from '../utils/auth';\nimport Layout from '../components/Layout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SetDeadline() {\n  _s();\n  const [deadline, setDeadline] = useState('');\n  const [current, setCurrent] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  useEffect(() => {\n    fetchCurrent();\n  }, []);\n  const fetchCurrent = async () => {\n    try {\n      const token = getToken();\n      if (!token) return;\n      const res = await axios.get('/api/settings/deadline', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setCurrent(res.data.deadline_datetime);\n    } catch {}\n  };\n  const handleSet = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    try {\n      const token = getToken();\n      if (!token) {\n        setError('Session expired. Please log in again.');\n        return;\n      }\n      await axios.post('/api/settings/deadline', {\n        deadline_datetime: deadline\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setSuccess('Deadline updated!');\n      fetchCurrent();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to set deadline');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-[60vh]\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"bg-white p-10 rounded-2xl shadow-xl w-96 flex flex-col gap-4 border border-blue-100\",\n        onSubmit: handleSet,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-4 text-blue-700 text-center\",\n          children: \"Set Submission Deadline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-2 text-center text-blue-700\",\n          children: [\"Current: \", current ? new Date(current).toLocaleString() : 'Not set']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          value: deadline,\n          onChange: e => setDeadline(e.target.value),\n          className: \"mb-4 w-full p-2 border rounded focus:ring-2 focus:ring-blue-200\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500 mb-2\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-green-500 mb-2\",\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-semibold transition\",\n          children: \"Set Deadline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/admin\",\n            className: \"text-blue-500 hover:underline\",\n            children: \"Back to Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(SetDeadline, \"FHWitWDXOauQhfs17rI6IZ0I5JA=\");\n_c = SetDeadline;\nvar _c;\n$RefreshReg$(_c, \"SetDeadline\");","map":{"version":3,"names":["React","useState","useEffect","axios","getToken","Layout","jsxDEV","_jsxDEV","SetDeadline","_s","deadline","setDeadline","current","setCurrent","error","setError","success","setSuccess","fetchCurrent","token","res","get","headers","Authorization","data","deadline_datetime","handleSet","e","preventDefault","post","err","_err$response","_err$response$data","response","children","className","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","Date","toLocaleString","type","value","onChange","target","required","href","_c","$RefreshReg$"],"sources":["/home/sarveesh-kaarthic-ramesh-kannan/Docky/frontend/src/pages/SetDeadline.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getToken } from '../utils/auth';\nimport Layout from '../components/Layout';\n\nexport default function SetDeadline() {\n  const [deadline, setDeadline] = useState('');\n  const [current, setCurrent] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    fetchCurrent();\n  }, []);\n\n  const fetchCurrent = async () => {\n    try {\n      const token = getToken();\n      if (!token) return;\n      const res = await axios.get('/api/settings/deadline', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setCurrent(res.data.deadline_datetime);\n    } catch {}\n  };\n\n  const handleSet = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    try {\n      const token = getToken();\n      if (!token) {\n        setError('Session expired. Please log in again.');\n        return;\n      }\n      await axios.post('/api/settings/deadline', { deadline_datetime: deadline }, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setSuccess('Deadline updated!');\n      fetchCurrent();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to set deadline');\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\n        <form className=\"bg-white p-10 rounded-2xl shadow-xl w-96 flex flex-col gap-4 border border-blue-100\" onSubmit={handleSet}>\n          <h2 className=\"text-2xl font-bold mb-4 text-blue-700 text-center\">Set Submission Deadline</h2>\n          <div className=\"mb-2 text-center text-blue-700\">Current: {current ? new Date(current).toLocaleString() : 'Not set'}</div>\n          <input type=\"datetime-local\" value={deadline} onChange={e => setDeadline(e.target.value)} className=\"mb-4 w-full p-2 border rounded focus:ring-2 focus:ring-blue-200\" required />\n          {error && <div className=\"text-red-500 mb-2\">{error}</div>}\n          {success && <div className=\"text-green-500 mb-2\">{success}</div>}\n          <button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-semibold transition\">Set Deadline</button>\n          <div className=\"mt-4 text-center\">\n            <a href=\"/admin\" className=\"text-blue-500 hover:underline\">Back to Dashboard</a>\n          </div>\n        </form>\n      </div>\n    </Layout>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}